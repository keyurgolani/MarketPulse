#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Run lint-staged for frontend
echo "ğŸ“ Checking frontend code..."
npx lint-staged

# Run lint-staged for backend
echo "ğŸ“ Checking backend code..."
cd server && npx lint-staged && cd ..

# Run type checking
echo "ğŸ” Type checking frontend..."
npm run type-check

echo "ğŸ” Type checking backend..."
cd server && npm run type-check && cd ..

# Run quick tests
echo "ğŸ§ª Running quick tests..."
npm run test -- --run --reporter=basic
cd server && npm run test -- --passWithNoTests && cd ..

echo "âœ… Pre-commit checks passed"