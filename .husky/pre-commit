echo "🔍 Running pre-commit checks..."

# Backup original state
git stash push --keep-index --include-untracked -m "Pre-commit backup $(date)"

# Run lint-staged for frontend
echo "📝 Checking frontend code..."
npx lint-staged

# Run lint-staged for backend
echo "📝 Checking backend code..."
cd server && npx lint-staged && cd ..

# Run type checking
echo "🔍 Type checking frontend..."
npm run type-check

echo "🔍 Type checking backend..."
cd server && npm run type-check && cd ..

# Run quick tests
echo "🧪 Running tests..."
npm run test -- --passWithNoTests
cd server && npm run test && cd ..

echo "✅ Pre-commit checks passed"