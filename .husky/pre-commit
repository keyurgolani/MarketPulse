echo "ğŸ” Running pre-commit checks..."

# Backup original state
git stash push --keep-index --include-untracked -m "Pre-commit backup $(date)"

# Run lint-staged for frontend
echo "ğŸ“ Checking frontend code..."
npx lint-staged

# Run lint-staged for backend
echo "ğŸ“ Checking backend code..."
cd server && npx lint-staged && cd ..

# Run type checking
echo "ğŸ” Type checking frontend..."
npm run type-check

echo "ğŸ” Type checking backend..."
cd server && npm run type-check && cd ..

# Run quick tests
echo "ğŸ§ª Running tests..."
npm run test -- --passWithNoTests
cd server && npm run test && cd ..

echo "âœ… Pre-commit checks passed"